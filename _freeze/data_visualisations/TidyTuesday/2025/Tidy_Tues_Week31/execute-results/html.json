{
  "hash": "cb0e44394b31f431deb78acbb79ef879",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"TidyTuesday Week 31: British Library Funding\"\nsubtitle: \"This week we're exploring Income Inequality Before and After Taxes, as processed and visualized by Joe Hasell at Our World in Data\"\nauthor: \"Peter Gray\"\ndate: \"2025-08-05\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"Python\" , \"2025\"]\ntags: [tidytuesday, data visulation, Python Programming, Pandas]\nimage: \"thumbnails/TidyTues_Week31.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: false\n    code-summary: \"Show code\"\n    self-contained: true\neditor_options: \n  chunk_output_type: console\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n:::\n#### 1. Python code\n\n::: {#0efd975f .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n\nincome_inequality_processed = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-08-05/income_inequality_processed.csv')\nincome_inequality_raw = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-08-05/income_inequality_raw.csv')\n\ncountries = [\"United States\", \"Germany\", \"France\", \"Italy\", \"Spain\", \"UK\"]\n\ndf = income_inequality_processed[income_inequality_processed[\"Entity\"].isin(countries)]\n\n# Only that after 20008\n\ndf = df[df[\"Year\"] >= 2008]\n\nheatmap_data_b4_tax = df.pivot(index=\"Entity\", columns=\"Year\", values=\"gini_mi_eq\")\nheatmap_data_aft_tax = df.pivot(index=\"Entity\", columns=\"Year\", values=\"gini_dhi_eq\")\n\n\nfig, axes = plt.subplots(1, 2, figsize=(18, 8), sharey=True)\n\nsns.heatmap(heatmap_data_b4_tax, \n            cmap=\"YlOrRd\", \n            ax=axes[0])\naxes[0].set_title(\"Before-Tax Income Inequality\")\naxes[0].set_xlabel(\"Year\")\naxes[0].set_ylabel(\"Country\")\n\nsns.heatmap(heatmap_data_aft_tax, \n            cmap=\"YlOrRd\", \n            ax=axes[1])\naxes[1].set_title(\"After-Tax Income Inequality\")\naxes[1].set_xlabel(\"Year\")\naxes[1].set_ylabel(\"\")\nplt.show()\n\n```\n\n::: {.cell-output .cell-output-display}\n![](Tidy_Tues_Week31_files/figure-html/cell-2-output-1.png){}\n:::\n:::\n\n\n",
    "supporting": [
      "Tidy_Tues_Week31_files"
    ],
    "filters": [],
    "includes": {}
  }
}