{
  "hash": "d42873f29c392e9e94aa8c1cb227eb62",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"TidyTuesday Week 41: Food/Water Security\"\nsubtitle: \"This Thursday (2025-10-16) is World Food Day, which celebrates the foundation of The Food and Agriculture Organization of the United Nations (FAO), which turns 80 this week! To mark this occasion, this week we're looking at the FAO's Suite of Food Security Indicators.\"\nauthor: \"Peter Gray\"\ndate: \"2025-10-20\" \ncategories: [\"TidyTuesday\", \"Data Visualization\", \"R Programming\", \"2025\"]\ntags: [tidytuesday, R, data visulation, ggplot2, tidyverse]\nimage: \"thumbnails/TidyTues_Week41.png\"\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: false\n    code-summary: \"Show code\"\n    self-contained: true\neditor_options: \n  chunk_output_type: console\nexecute: \n  freeze: true                                                  \n  cache: true                                                   \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n![Chart](thumbnails/TidyTues_Week41.png){#fig-singlechart}\nGraph of Water Access \n\n\n\n#### 1. R code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif(!require(tidyverse)){install.packages(\"tidyverse\"); library(tidyverse)}\nif(!require(scales)){install.packages(\"scales\"); library(scales)}\nif(!require(ggrepel)){install.packages(\"ggrepel\"); library(ggrepel)}\n\nfood_security <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-10-14/food_security.csv')\n\n\nregions <- c(\n  \"Africa\",\n  \"Sub-Saharan Africa\",\n  \"Northern America\",\n  \"Europe\",\n  \"Caribbean\",\n  \"South America\",\n  \"Asia\",\n  \"Central Asia\",\n  \"South-eastern Asia\",\n  \"Polynesia\",\n  \"World\"\n)\n\n\n\nwater_safety_regions <- \n  food_security |> \n  filter(Item == \"Percentage of population using safely managed drinking water services (percent)\")  |> \n  filter(Area %in% regions)\n\n\nlabel_data <- water_safety_regions |>\n  group_by(Area) |>\n  filter(Year_End == max(Year_End)) |>\n  ungroup() |> \n  mutate(Area  = case_when(Area == \"World\" ~ \"World Average\", TRUE  ~ Area)) |> \n  mutate(Label = paste0(Area, \" \\n(\", Value,\"%)\"))\n\n\n\nplot <- water_safety_regions |>\n  ggplot(aes(x = Year_End, y = Value, color = Area)) +\n  geom_line(linewidth = 1.5, alpha = 0.9) +\n  geom_label_repel(\n    data = label_data,\n    aes(label = Label),\n    fill = alpha(\"white\", 0.7),\n    color = \"#004E89\",\n    fontface = \"bold\",\n    size = 3.8,\n    box.padding = 0.5,\n    nudge_x = 2,\n    segment.color = \"deepskyblue4\"\n  ) +\n  scale_y_continuous(labels = label_percent(scale = 1)) +\n  labs(\n    title = \"üíß Access to Safely Managed Drinking Water Services by Region üåç\",\n    subtitle = \"Share of population using safely managed drinking water (percent)\",\n    x = \"Year\",\n    y = \"Population (%)\",\n    caption = \"Source: FAO / WHO Joint Monitoring Programme (JMP)\"\n  ) +\n  theme_minimal(base_size = 14) +\n  theme(\n    plot.background = element_rect(fill = \"#e0f7fa\", color = NA),\n    panel.background = element_rect(fill = alpha(\"#b2ebf2\", 0.4), color = NA),\n    panel.grid = element_blank(),\n    axis.title = element_text(face = \"bold\", color = \"#004e89\"),\n    axis.text = element_text(color = \"#0077b6\"),\n    plot.title = element_text(\n      face = \"bold\",\n      size = 18,\n      color = \"#023e8a\",\n      margin = margin(b = 10)\n    ),\n    plot.subtitle = element_text(size = 12, color = \"#0077b6\"),\n    legend.position = \"none\",\n    plot.caption = element_text(color = \"#0077b6\", face = \"italic\"),\n    axis.line = element_line(linewidth = 0.5, color = \"#0077b6\")\n  ) +\n  geom_smooth(aes(group = 1), method = \"loess\", se = FALSE,\n              color = \"#00b4d8\", linewidth = 1, alpha = 0.3)\n```\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}